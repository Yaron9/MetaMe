# MetaMe Daemon Configuration
# Generated by: metame daemon init

telegram:
  enabled: false
  bot_token: null
  allowed_chat_ids: []

feishu:
  enabled: false
  app_id: null
  app_secret: null
  allowed_chat_ids: []

projects:
  # Per-project heartbeat tasks. Each project's tasks are isolated and
  # notifications arrive as colored Feishu cards (visually distinct).
  #
  # example_project:
  #   name: "My Project"
  #   icon: "ğŸ¬"
  #   color: "orange"        # blue|orange|green|red|grey|purple|turquoise
  #   heartbeat_tasks:
  #     - name: "daily-task"
  #       cwd: "~/AGI/MyProject"
  #       model: "sonnet"
  #       interval: "24h"
  #       notify: true
  #       enabled: true
  #       prompt: "..."
  #       allowedTools: [Read, Write, WebSearch]

heartbeat:
  tasks:
    # è®¤çŸ¥è’¸é¦ï¼šæœ‰åå¥½ä¿¡å·æ‰è§¦å‘ï¼Œ4å°æ—¶å†·å´ï¼Œä»…åœ¨ç”¨æˆ·é—²ç½®æ—¶æ‰§è¡Œ
    - name: cognitive-distill
      type: script
      command: node ~/.metame/distill.js
      interval: 4h
      precondition: "test -s ~/.metame/raw_signals.jsonl"
      require_idle: true
      notify: false
      enabled: true

    # è®°å¿†æå–ï¼šæ‰«ææœªåˆ†æ sessionï¼Œæå–é•¿æœŸäº‹å®å’Œä¼šè¯æ ‡ç­¾ï¼Œ2å°æ—¶å†·å´
    - name: memory-extract
      type: script
      command: node ~/.metame/memory-extract.js
      interval: 2h
      timeout: 600
      require_idle: true
      notify: false
      enabled: true

    # æŠ€èƒ½æ¼”åŒ–ï¼šæœ‰æŠ€èƒ½ä¿¡å·æ‰è§¦å‘ï¼Œ6å°æ—¶å†·å´ï¼Œä»…åœ¨ç”¨æˆ·é—²ç½®æ—¶æ‰§è¡Œ
    - name: skill-evolve
      type: script
      command: node ~/.metame/skill-evolution.js
      interval: 6h
      precondition: "test -s ~/.metame/skill_signals.jsonl"
      require_idle: true
      notify: false
      enabled: true

    # Legacy flat tasks (no project isolation). New tasks should go under projects: above.
    # Examples â€” uncomment or add your own:
    #
    # Scheduled task (calls claude -p with your profile context):
    # - name: "morning-news"
    #   prompt: "æŠ“å–ä»Šå¤©çš„AIé¢†åŸŸé‡è¦æ–°é—»ï¼Œæ•´ç†æˆ3æ¡æ‘˜è¦ï¼Œä¸­è‹±åŒè¯­ã€‚"
    #   interval: "24h"
    #   model: "haiku"
    #   notify: true
    #
    # - name: "weekly-review"
    #   prompt: "åŸºäºæˆ‘çš„profileï¼Œç”Ÿæˆæœ¬å‘¨ä¸ªäººæˆé•¿å›é¡¾å’Œä¸‹å‘¨å»ºè®®ã€‚"
    #   interval: "7d"
    #   model: "haiku"
    #   notify: true
    #
    # Script task (runs a local script directly, no claude -p):
    # - name: "distill"
    #   type: "script"
    #   command: "node ~/.metame/distill.js"
    #   interval: "6h"
    #   precondition: "test -s ~/.metame/raw_signals.jsonl"
    #   notify: false
    #
    # Skill evolution cold path (independent of cognitive distill):
    # - name: "skill-evolve"
    #   type: "script"
    #   command: "node ~/.metame/skill-evolution.js"
    #   interval: "6h"
    #   precondition: "test -s ~/.metame/skill_signals.jsonl"
    #   notify: false
    #
    # precondition: shell command, empty output â†’ skip (zero tokens)
    # type: "script" â†’ runs command directly instead of claude -p

budget:
  daily_limit: 50000
  warning_threshold: 0.8

daemon:
  model: sonnet  # sonnet, opus, haiku â€” model for mobile sessions
  log_max_size: 1048576
  heartbeat_check_interval: 60
  # Skip all permission prompts for mobile sessions (full access)
  # Mobile users can't click "allow" â€” so we pre-authorize everything.
  # Security relies on allowed_chat_ids whitelist, not tool restrictions.
  dangerously_skip_permissions: true
